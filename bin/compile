#!/usr/bin/env bash
# bin/compile <build-dir> <cache-dir>

set -e
set -o pipefail

BUILD_DIR=$1
CACHE_DIR=$2

cd $BUILD_DIR

ls vendor/cmake/cmake-3.9.1
export PATH=$PATH:vendor/cmake/cmake-3.9.1/bin
sudo cp vendor/cmake/cmake-3.9.1/bin/cmake /usr/local/bin/cmake

# configure
#if [ -f $1/prepare.py ]; then
#  echo "-----> Configuring"
#  ./prepare.py
#fi

# make
echo "-----> Compiling with Make"
make -C WORK/flexisip/cmake
